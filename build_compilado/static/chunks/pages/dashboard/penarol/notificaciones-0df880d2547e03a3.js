(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[162],{7776:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/penarol/notificaciones",function(){return c(8369)}])},947:function(a,b,c){"use strict";var d=c(5893),e=c(1163),f=c(1664),g=c.n(f);b.Z=function(){var a=(0,e.useRouter)().asPath.split("/");return a=a[3],(0,d.jsxs)("div",{className:"container-app-menu",children:[(0,d.jsx)(g(),{href:"/dashboard/penarol/",children:(0,d.jsx)("span",{style:{background:a?"#fff":"#4eff8d"},children:"Configuracion"})}),(0,d.jsx)(g(),{href:"/dashboard/penarol/canciones",children:(0,d.jsx)("span",{style:{background:"canciones"===a?"#4eff8d":"#fff"},children:"Canciones"})}),(0,d.jsx)(g(),{href:"/dashboard/penarol/noticias",children:(0,d.jsx)("span",{style:{background:"noticias"===a?"#4eff8d":"#fff"},children:"Noticias"})}),(0,d.jsx)(g(),{href:"/dashboard/penarol/partido",children:(0,d.jsx)("span",{style:{background:"partido"===a?"#4eff8d":"#fff"},children:"Partido"})}),(0,d.jsx)(g(),{href:"/dashboard/penarol/notificaciones",children:(0,d.jsx)("span",{style:{background:"notificaciones"===a?"#4eff8d":"#fff"},children:"Notificaciones"})})]})}},1235:function(a,b,c){"use strict";c.d(b,{Is:function(){return i},br:function(){return h},db:function(){return g}});var d=c(5503),e=c(6257),f=(0,d.ZF)({apiKey:"AIzaSyDd-VsSWoKbjV7gWj7VQ94Ua5w4BTn5GeM",authDomain:"canciones-de-penarol.firebaseapp.com",projectId:"canciones-de-penarol",storageBucket:"canciones-de-penarol.appspot.com",messagingSenderId:"34553452003",appId:"1:34553452003:web:75e4c5131bff494dfdfcd6"},"penarol"),g=(0,e.ad)(f),h="/api/penarol/sendnotification",i="/api/penarol/scrapmatch"},8369:function(a,b,c){"use strict";c.r(b);var d=c(7568),e=c(4051),f=c.n(e),g=c(5893),h=c(7294),i=c(947),j=c(1235),k=c(6257),l=[{name:"Sounds",info:"Pantalla de inicio / canciones"},{name:"News",info:"Pantalla de todas noticias"},{name:"Match",info:"Pantalla de proximo partido"},{name:"IndividualNews",info:"Pantalla noticias individuales"}];b.default=function(a){var b,c=function(){var a=y.DiviceNoRegisterUserId;if(!a.length){alert("No hay usuarios con: DeviceNotRegistered");return}var b=[];a.forEach(function(a){var c=(0,k.JU)(j.db,"users",a),d=(0,k.r7)(c,{tokenStatus:!1});b.push(d)}),Promise.all(b).then(function(a){alert("Estado de token actualizados")})},e=(0,h.useState)(""),m=e[0],n=e[1],o=(0,h.useState)(""),p=o[0],q=o[1],r=(0,h.useState)(l[0].name),s=r[0],t=r[1],u=(0,h.useState)(!1),v=u[0],w=u[1],x=(0,h.useState)(!1),y=x[0],z=x[1],A=(0,h.useState)([]),B=A[0],C=A[1],D=(0,h.useState)(""),E=D[0],F=D[1];function G(a){return H.apply(this,arguments)}function H(){return(H=(0,d.Z)(f().mark(function a(b){var c,d,e,g,h,i,l;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c={},d=(0,k.hJ)(j.db,"users"),e=(0,k.IO)(d,(0,k.ar)("tokenStatus","==",!0)),a.next=5,(0,k.PL)(e);case 5:return g=a.sent,h={},g.forEach(function(a){h[a.id]={id:a.id,token:a.data().token}}),c.users=h,c.info=b,a.next=12,fetch(j.br,{method:"POST",body:JSON.stringify(c)});case 12:return i=a.sent,a.next=15,i.json();case 15:return l=a.sent,a.abrupt("return",l);case 17:case"end":return a.stop()}},a)}))).apply(this,arguments)}(0,h.useEffect)(function(){(0,d.Z)(f().mark(function a(){var b,c,d,e;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!("IndividualNews"===s&&!B.length)){a.next=11;break}return b=(0,k.hJ)(j.db,"news"),c=(0,k.IO)(b,(0,k.b9)(10)),a.next=5,(0,k.PL)(c);case 5:d=a.sent,e=[],d.forEach(function(a){e.push(a.data())}),C(e),a.next=12;break;case 11:F("");case 12:case"end":return a.stop()}},a)}))()},[s]);var I=(b=(0,d.Z)(f().mark(function a(){var b,c,d;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b={},!(m.trim().length<4)){a.next=4;break}return alert("Inserta el titulo de la notificacion"),a.abrupt("return");case 4:if("IndividualNews"!=s){a.next=9;break}if(E.length){a.next=8;break}return alert("Elige una noticia"),a.abrupt("return");case 8:b=B.filter(function(a){return a.id==E})[0];case 9:return w(!0),z(!1),(c={}).screen=s,c.title=m,c.description=p,c.data=b,z(!0),a.next=19,G(c);case 19:z(d=a.sent),w(!1),F("");case 23:case"end":return a.stop()}},a)})),function(){return b.apply(this,arguments)});return(0,g.jsxs)("div",{style:{flexDirection:"column",display:"flex",flex:1},children:[(0,g.jsx)(i.Z,{}),(0,g.jsxs)("div",{className:"containerInfoApp",children:[(0,g.jsxs)("div",{style:{flexDirection:"column",display:"flex"},children:[(0,g.jsx)("h2",{children:"Notificaciones"}),(0,g.jsxs)("div",{className:"input-single-container",children:[(0,g.jsx)("span",{children:"Titulo de la notificacion:"}),(0,g.jsx)("input",{value:m,onChange:function(a){return n(a.target.value)},placeholder:"Titulo notificacion"})]}),(0,g.jsxs)("div",{className:"input-single-container",children:[(0,g.jsx)("span",{children:"Descripcion de la notificacion:"}),(0,g.jsx)("input",{value:p,onChange:function(a){return q(a.target.value)},placeholder:"Descripcion notificacion"})]}),(0,g.jsxs)("div",{className:"input-single-container",children:[(0,g.jsx)("span",{children:"Pantalla:"}),(0,g.jsx)("select",{name:"cars",id:"cars",style:{padding:10},onChange:function(a){return t(a.target.value)},children:l.map(function(a){return(0,g.jsxs)("option",{value:a.name,children:[a.name," -- ",a.info]},a.name)})})]}),"IndividualNews"==s?(0,g.jsxs)("div",{className:"input-single-container",children:[(0,g.jsx)("span",{children:"Selecciona la noticia:"}),(0,g.jsx)("select",{name:"cars",id:"cars",style:{padding:10},onChange:function(a){return F(a.target.value)},children:B.map(function(a){return(0,g.jsx)("option",{value:a.id,children:a.title},a.id)})})]}):null]}),(0,g.jsx)("button",{disabled:v,onClick:I,className:"button-save",children:"Enviar"}),y?(0,g.jsxs)("div",{className:"input-single-container",style:{backgroundColor:"yellow",padding:10,marginTop:20},children:[(0,g.jsx)("h4",{children:"Resultado Notificaciones:"}),!0===y?(0,g.jsx)("h4",{children:"Enviando..."}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("ul",{style:{margin:20},children:[(0,g.jsxs)("li",{children:["Enviadas: ",y.notificationsSended]}),(0,g.jsxs)("li",{children:["Arrivadas: ",y.notificationSuccess]}),(0,g.jsxs)("li",{children:["Fallidas: ",y.notificationsError," - ",(0,g.jsxs)("span",{style:{fontWeight:"bold",color:"red"},children:["DeviceNotRegistered: ",y.DeviceNotRegisteredCount]})]}),y.errorChunk?(0,g.jsxs)("li",{children:["Error chunk: ",y.errorChunk," (Error al enviar 100 notificaciones)"]}):null]}),(0,g.jsx)("hr",{style:{margin:10}}),(0,g.jsx)("span",{style:{margin:15,marginBottom:0},children:"Presionar este boton si deseo no enviar mas token a los usuario con resultado DeviceNotRegistered de esta notificacion"}),(0,g.jsx)("button",{className:"button-delete-tokens",onClick:c,children:"CAMBIAR ESTADO DE TOKENS"})]})]}):null]})]})}},7568:function(a,b,c){"use strict";function d(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function e(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function h(a){d(g,e,f,h,i,"next",a)}function i(a){d(g,e,f,h,i,"throw",a)}h(void 0)})}}c.d(b,{Z:function(){return e}})}},function(a){a.O(0,[16,77,774,888,179],function(){var b;return a(a.s=7776)}),_N_E=a.O()}])